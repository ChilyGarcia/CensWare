<div style="width: 100%; height: 100%">
  <div style="width: 700px; display: inline-block; margin-left: 3%">
    <app-mapa></app-mapa>
  </div>
  <div
    style="width: 90px; height: 100%; display: inline-block; margin-left: 50%"
  >
    <div class="login-box">
      <h2>Caracterizacion</h2>

      <form (ngSubmit)="enviarCaracterizacion()" id="form" #formRef="ngForm">
        <div class="user-box">
          <input
            [(ngModel)]="caracterizacion.nombrePunto"
            [required]="true"
            matInput
            id="nombre"
            pattern="[A-Za-z]"
            name="nombrePunto"
          />
          <label>Nombre</label>
        </div>
        <div class="user-box">
          <input
            [required]="true"
            matInput
            id="latitud"
            [(ngModel)]="caracterizacion.latitud"
            name="latitud"
            pattern="[0-9.]{17}"
            maxlength="18"
            title="Ingrese solo números y el carácter '.' y la longitud debe ser exactamente 17"
          />
          <label>Latitud</label>
        </div>
        <div class="user-box">
          <input
            [required]="true"
            matInput
            id="longitud"
            [(ngModel)]="caracterizacion.longitud"
            name="longitud"
            pattern="[0-9.]{17}"
            maxlength="18"
            title="Ingrese solo números y el carácter '.' y la longitud debe ser exactamente 17"
          />
          <label>Longitud</label>
        </div>
        <div class="user-box">
          <input
            [required]="true"
            matInput
            id="cantRemanente"
            [(ngModel)]="caracterizacion.cantRemanente"
            pattern="[0-9.]+"
            name="cantRemanente"
            title="Ingrese solo números y el carácter '.'"
          />
          <label>Remanente</label>
        </div>

        <mat-form-field class="selectRol">
          <mat-select
            placeholder="Tipo de punto"
            name="tipoPunto"
            [(ngModel)]="caracterizacion.tipoPunto"
          >
            <mat-option value="POSTE">POSTE</mat-option>
            <mat-option value="ESTACION">ESTACION</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="selectRol">
          <mat-select
            placeholder="Poste medicion?"
            name="medicion"
            class="custom-select"
            [(ngModel)]="comprobacion.medicion"
          >
            <mat-option value="SI">SI</mat-option>
            <mat-option value="NO">NO</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="selectRol">
          <mat-select
            placeholder="Ruta"
            name="ruta"
            [(ngModel)]="caracterizacion.ruta"
          >
            <mat-option
              *ngFor="let opcion of listaRutas"
              [value]="opcion.rutaNombre"
              >{{ opcion.rutaNombre }}</mat-option
            >
          </mat-select>
        </mat-form-field>

        <div
          style="display: flex; justify-content: space-between; margin-top: 2%"
        >
          <button (click)="caracterizacionExcel()" mat-raised-button style="margin-left: 0%; background-color: green; color: white; width: 48%;">Excel</button>

          <button
            *ngIf="
              caracterizacion.latitud.length > 15 &&
              caracterizacion.longitud.length > 15 &&
              caracterizacion.latitud.includes('.') &&
              caracterizacion.longitud.includes('.') &&
              containsOnlyNumbersAndDot(caracterizacion.latitud) &&
              containsOnlyNumbersAndDot(caracterizacion.longitud) &&
              caracterizacion.cantRemanente != '' &&
              containsOnlyNumbersAndDot(caracterizacion.cantRemanente) &&
              caracterizacion.tipoPunto != '' &&
              comprobacion.medicion != '' &&
              caracterizacion.ruta != ''
            "
            type="submit"
            mat-raised-button
            style="background-color: white; width: 48%;"
          >
            Enviar
          </button>

          <button
            *ngIf="
              caracterizacion.latitud.length < 15 ||
              caracterizacion.longitud.length < 15 ||
              !caracterizacion.latitud.includes('.') ||
              !caracterizacion.longitud.includes('.') ||
              !containsOnlyNumbersAndDot(caracterizacion.latitud) ||
              !containsOnlyNumbersAndDot(caracterizacion.longitud) ||
              caracterizacion.cantRemanente == '' ||
              !containsOnlyNumbersAndDot(caracterizacion.cantRemanente) ||
              caracterizacion.tipoPunto == '' ||
              comprobacion.medicion == '' ||
              caracterizacion.ruta == ''
            "
            disabled="true"
            mat-raised-button
            style="background-color: gray; width: 48%;"
          >
            Enviar
          </button>

        </div>
      </form>
    </div>
  </div>
</div>
